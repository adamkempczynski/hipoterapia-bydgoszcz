---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';

// Importujemy nasze zdjęcie
import heroImage from '../assets/hero-image-v2.webp';

const allPosts = await getCollection('aktualnosci');

const sortedPosts = allPosts.sort((
    a: CollectionEntry<'aktualnosci'>,
    b: CollectionEntry<'aktualnosci'>
) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<MainLayout title="Strona Główna">
	<!-- Hero Section -->
	<section class="relative h-[60vh] min-h-[400px] max-h-[600px] overflow-hidden rounded-2xl mx-4 sm:mx-6 lg:mx-8 mt-6">
		<Image
			src={heroImage}
			alt="Uśmiechnięty uczestnik hipoterapii w specjalnych uprzężach podczas zajęć z koniem w Bydgoszczy"
			class="absolute inset-0 w-full h-full object-cover"
		/>
		<div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"></div>
		<div class="relative z-10 h-full flex items-end justify-center text-center px-4 pb-12 md:pb-16">
			<div class="max-w-4xl">
				<h1 class="text-4xl md:text-6xl font-bold text-white mb-6 animate-fade-in">
					Terapia, która daje <span class="text-primary-300">radość</span>
				</h1>
				<p class="text-xl md:text-2xl text-gray-200 mb-8 font-light animate-slide-up">
					Odkryj moc hipoterapii w profesjonalnym i przyjaznym otoczeniu.
				</p>
				<div class="flex flex-col sm:flex-row gap-4 justify-center animate-slide-up">
					<a href="/oferta/" class="btn bg-primary-600 hover:bg-primary-700 text-white px-8 py-4 text-lg">
						Zobacz ofertę
					</a>
					<a href="/kontakt/" class="btn bg-white/20 hover:bg-white/30 text-white border border-white/50 px-8 py-4 text-lg backdrop-blur-sm">
						Skontaktuj się
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Features Section -->
	<section class="py-20 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden">
		<!-- Decorative background elements -->
		<div class="absolute inset-0 opacity-5">
			<div class="absolute top-0 left-1/4 w-96 h-96 bg-primary-300 rounded-full blur-3xl"></div>
			<div class="absolute bottom-0 right-1/4 w-96 h-96 bg-primary-400 rounded-full blur-3xl"></div>
		</div>

		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
			<div class="text-center mb-16">
				<h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
					Dlaczego <span class="text-primary-600">hipoterapia</span>?
				</h2>
				<p class="text-xl text-gray-600 max-w-3xl mx-auto">
					Hipoterapia to innowacyjna metoda rehabilitacji wykorzystująca ruch konia do poprawy funkcjonowania fizycznego i psychicznego.
				</p>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				<div class="card text-center p-8 bg-white hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100">
					<div class="w-20 h-20 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg transform transition-transform group-hover:scale-110">
						<svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-4">Profesjonalna opieka</h3>
					<p class="text-gray-600 leading-relaxed">
						Doświadczeni terapeuci i instruktorzy zapewniają bezpieczną i skuteczną terapię dostosowaną do indywidualnych potrzeb.
					</p>
				</div>

				<div class="card text-center p-8 bg-white hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100">
					<div class="w-20 h-20 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg transform transition-transform group-hover:scale-110">
						<svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-4">Skuteczne efekty</h3>
					<p class="text-gray-600 leading-relaxed">
						Poprawa równowagi, koordynacji, siły mięśniowej oraz rozwój umiejętności społecznych i emocjonalnych.
					</p>
				</div>

				<div class="card text-center p-8 bg-white hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100">
					<div class="w-20 h-20 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg transform transition-transform group-hover:scale-110">
						<svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-4">Indywidualne podejście</h3>
					<p class="text-gray-600 leading-relaxed">
						Każda sesja jest dostosowana do wieku, możliwości i celów terapeutycznych uczestnika.
					</p>
				</div>
			</div>
		</div>
	</section>

	<!-- News Section -->
	<section class="py-20 bg-white">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-12 gap-4">
				<div>
					<h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">
						Ostatnie <span class="text-primary-600">aktualności</span>
					</h2>
					<p class="text-gray-600">Poznaj najnowsze wydarzenia z naszego ośrodka</p>
				</div>
				<a href="/aktualnosci/" class="btn bg-primary-600 hover:bg-primary-700 text-white inline-flex items-center">
					Wszystkie aktualności
					<svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</div>

			{/* Featured Post - Hero Card */}
			{sortedPosts.length > 0 && (
				<article class="card overflow-hidden mb-12 group hover:shadow-2xl transition-all duration-300 border border-gray-100">
					<div class="grid md:grid-cols-2 gap-0">
						{/* Image Section */}
						<div class="relative h-80 md:h-auto bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6">
							{sortedPosts[0].data.gallery && sortedPosts[0].data.gallery.length > 0 ? (
								<>
									<img
										src={sortedPosts[0].data.gallery[0]}
										alt={sortedPosts[0].data.title}
										loading="eager"
										class="w-full h-full object-contain group-hover:scale-105 transition-transform duration-500"
									/>
								</>
							) : (
								<div class="w-full h-full bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center rounded-lg shadow-inner">
									<svg class="w-24 h-24 text-white/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2.5 2.5 0 00-5 0V17m-10 0h6"></path>
									</svg>
								</div>
							)}
							<div class="absolute top-4 left-4 z-10">
								<span class="inline-block px-4 py-2 bg-primary-600 text-white text-xs font-bold uppercase tracking-wide rounded-full shadow-lg animate-pulse">
									Najnowsze
								</span>
							</div>
						</div>

						{/* Content Section */}
						<div class="p-8 md:p-10 flex flex-col justify-center bg-gradient-to-br from-white to-gray-50">
							<div class="mb-4">
								{sortedPosts[0].data.category && (
									<span class="inline-block px-3 py-1 bg-primary-100 text-primary-800 text-sm font-medium rounded-full mb-4">
										{sortedPosts[0].data.category}
									</span>
								)}
								<h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4 group-hover:text-primary-600 transition-colors">
									<a href={`/aktualnosci/wpis/${sortedPosts[0].slug}/`} class="text-decoration-none">
										{sortedPosts[0].data.title}
									</a>
								</h3>
								<p class="text-sm text-gray-500 mb-4 flex items-center">
									<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
									</svg>
									{sortedPosts[0].data.pubDate.toLocaleDateString('pl-PL', {
										day: 'numeric',
										month: 'long',
										year: 'numeric'
									})}
								</p>
							</div>
							{sortedPosts[0].data.description && (
								<p class="text-gray-600 text-lg mb-6 line-clamp-3 leading-relaxed">
									{sortedPosts[0].data.description}
								</p>
							)}
							<a
								href={`/aktualnosci/wpis/${sortedPosts[0].slug}/`}
								class="inline-flex items-center text-primary-600 hover:text-primary-700 font-semibold text-lg transition-all group-hover:gap-3 gap-2"
							>
								Czytaj więcej
								<svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
								</svg>
							</a>
						</div>
					</div>
				</article>
			)}

			{/* Other Posts Grid */}
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{sortedPosts.slice(1, 6).map((post: CollectionEntry<'aktualnosci'>) => (
					<article class="card overflow-hidden group hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 bg-white">
						{post.data.image && (
							<div class="overflow-hidden">
								<img
									src={post.data.image}
									alt={post.data.title}
									loading="lazy"
									class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300"
								/>
							</div>
						)}
						<div class="p-6">
						<div class="mb-4">
							<span class="inline-block px-3 py-1 bg-primary-100 text-primary-800 text-sm font-medium rounded-full mb-3">
								{post.data.category}
							</span>
							<h3 class="text-xl font-semibold text-gray-900 mb-3 group-hover:text-primary-600 transition-colors">
								<a href={`/aktualnosci/wpis/${post.slug}/`} class="text-decoration-none">{post.data.title}</a>
							</h3>
							<p class="text-sm text-gray-500 mb-3 flex items-center">
								<svg class="w-4 h-4 mr-1.5 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
								</svg>
								{post.data.pubDate.toLocaleDateString('pl-PL', {
									day: 'numeric',
									month: 'long',
									year: 'numeric'
								})}
							</p>
						</div>
						{post.data.description && (
							<p class="text-gray-600 mb-4 line-clamp-3">{post.data.description}</p>
						)}
						<a
							href={`/aktualnosci/wpis/${post.slug}/`}
							class="inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-all group-hover:gap-2 gap-1"
						>
							Czytaj więcej
							<svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
							</svg>
						</a>
						</div>
					</article>
				))}
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="py-20 bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800 relative overflow-hidden">
		<!-- Decorative elements -->
		<div class="absolute inset-0 opacity-10">
			<div class="absolute top-0 right-0 w-96 h-96 bg-white rounded-full blur-3xl"></div>
			<div class="absolute bottom-0 left-0 w-96 h-96 bg-white rounded-full blur-3xl"></div>
		</div>

		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
			<h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
				Gotowy na pierwszy krok?
			</h2>
			<p class="text-xl text-primary-100 mb-10 max-w-2xl mx-auto leading-relaxed">
				Skontaktuj się z nami, aby umówić konsultację i dowiedzieć się więcej o możliwościach hipoterapii.
			</p>
			<div class="flex flex-col sm:flex-row gap-4 justify-center">
				<a href="/kontakt/" class="btn bg-white hover:bg-gray-100 text-primary-600 px-8 py-4 text-lg font-semibold shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300">
					Skontaktuj się z nami
				</a>
				<a href="/oferta/" class="btn bg-primary-500 hover:bg-primary-400 text-white px-8 py-4 text-lg font-semibold border-2 border-white/30 hover:border-white/50 shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300">
					Poznaj pełną ofertę
				</a>
			</div>
		</div>
	</section>
</MainLayout>

<style>
	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.text-decoration-none {
		text-decoration: none;
	}
</style>