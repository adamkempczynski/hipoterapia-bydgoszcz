---
import MainLayout from '../../layouts/MainLayout.astro';
import PageHero from '../../components/PageHero.astro';

const years = [2024, 2023, 2022, 2021, 2020];

const getDocuments = (year: number) => {
	const base = `/uploads/druki/sprawozdania_OPP/${year}`;
	// 2023 and 2024 have slightly different Wprowadzenie filename
	const wprowadzenieFile = year >= 2023
		? `Wprowadzenie_do_sprawozdania_${year}.pdf`
		: `Wprowadzenie_do_sprawozdania_finansowego_${year}.pdf`;

	return [
		{ name: 'Sprawozdanie merytoryczne', file: `${base}/Sprawozdanie_merytoryczne_${year}.pdf` },
		{ name: 'Bilans', file: `${base}/Bilans_${year}.pdf` },
		{ name: 'Rachunek zysków i strat', file: `${base}/Rachunek_zyskow_i_strat_${year}.pdf` },
		{ name: 'Informacja dodatkowa', file: `${base}/Informacja_dodatkowa_${year}.pdf` },
		{ name: 'Wprowadzenie do sprawozdania', file: `${base}/${wprowadzenieFile}` },
	];
};
---

<MainLayout title="Sprawozdania OPP">
	<PageHero
		title="Sprawozdania OPP"
		subtitle="Roczne sprawozdania merytoryczne i finansowe organizacji pożytku publicznego"
		breadcrumbs={[{ label: 'Strona główna', href: '/' }, { label: 'Towarzystwo', href: '/towarzystwo/' }, { label: 'Sprawozdania OPP' }]}
	/>

	<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

		<!-- Info Box -->
		<div class="card-warm p-6 mb-10">
			<div class="flex items-start gap-4">
				<div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0">
					<svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
						<path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
					</svg>
				</div>
				<div>
					<p class="text-gray-700 leading-relaxed">
						Bydgoskie Towarzystwo Hipoterapeutyczne „Myślęcinek" posiada status
						<strong>organizacji pożytku publicznego</strong> (KRS 0000120586).
						Poniżej znajdują się sprawozdania merytoryczne i finansowe za lata 2020–2024.
					</p>
				</div>
			</div>
		</div>

		<!-- Reports by Year -->
		{years.map((year) => (
			<section class="mb-10">
				<div class="flex items-center gap-3 mb-6 pb-3 border-b-2 border-primary-200">
					<div class="w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center flex-shrink-0">
						<span class="text-white font-bold text-sm">{year}</span>
					</div>
					<h2 class="text-2xl font-bold text-gray-900">Sprawozdania za rok {year}</h2>
				</div>

				<div class="space-y-3">
					{getDocuments(year).map((doc) => (
						<a
							href={doc.file}
							target="_blank"
							class="flex items-center gap-4 p-4 bg-white rounded-xl border border-gray-100 hover:border-primary-200 hover:shadow-md transition-all duration-200 group"
						>
							<div class="w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-red-100 transition-colors">
								<svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
									<path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
								</svg>
							</div>
							<div class="flex-1 min-w-0">
								<span class="text-gray-900 font-medium group-hover:text-primary-600 transition-colors">
									{doc.name}
								</span>
								<span class="text-gray-400 text-sm ml-2">PDF</span>
							</div>
							<svg class="w-5 h-5 text-gray-400 group-hover:text-primary-600 transition-colors flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
								<path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
							</svg>
						</a>
					))}
				</div>
			</section>
		))}

		<!-- 1.5% Info -->
		<section class="bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-8 text-center text-white">
			<div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
				<svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
					<path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
				</svg>
			</div>
			<h2 class="text-3xl font-bold mb-4">Wesprzyj nas 1,5% podatku</h2>
			<p class="text-xl text-primary-100 mb-6 max-w-2xl mx-auto">
				Jako organizacja pożytku publicznego możemy otrzymywać 1,5% podatku dochodowego.
				Wystarczy wpisać nasz numer KRS w zeznaniu podatkowym.
			</p>
			<div class="bg-white/20 rounded-xl p-4 inline-block">
				<span class="text-primary-100 text-sm block mb-1">KRS</span>
				<span class="text-3xl font-bold">0000120586</span>
			</div>
			<p class="text-primary-200 text-sm mt-4">
				<a href="/towarzystwo/numer-konta/" class="text-white underline hover:no-underline">
					Dane do wpłat i darowizn
				</a>
			</p>
		</section>
	</div>
</MainLayout>
