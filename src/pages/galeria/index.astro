---
import MainLayout from '../../layouts/MainLayout.astro';
import Gallery from '../../components/Gallery.astro';
import PageHero from '../../components/PageHero.astro';
import ScrollReveal from '../../components/ScrollReveal.astro';

// Helper: generate sequential paths /uploads/{dir}/{1..count}.webp
const seq = (dir: string, count: number) =>
	Array.from({ length: count }, (_, i) => `/uploads/${dir}/${i + 1}.webp`);

// Current galleries (2024-2025) — existing on the site
const currentGalleries = [
	{
		title: "Zabawa Mikołajkowa 2025",
		description: "Świąteczna zabawa mikołajkowa dla uczestników hipoterapii i ich rodzin.",
		images: [
			"/uploads/zabawa_mikolajkowa_2025/zabawa_mikolajkowa0.webp",
			"/uploads/zabawa_mikolajkowa_2025/zabawa_mikolajkowa1.webp",
			"/uploads/zabawa_mikolajkowa_2025/zabawa_mikolajkowa2.webp",
			"/uploads/zabawa_mikolajkowa_2025/zabawa_mikolajkowa3.webp",
		],
		id: "zabawa-mikolajkowa-2025",
	},
	{
		title: "Spływ kajakowy 2025",
		description: "Wspaniała integracja na wodzie \u2014 spływ kajakowy z uczestnikami i rodzinami.",
		images: [
			"/uploads/splyw_2025/splyw_2025_01.webp",
			"/uploads/splyw_2025/splyw_2025_02.webp",
			"/uploads/splyw_2025/splyw_2025_03.webp",
			"/uploads/splyw_2025/splyw_2025_04.webp",
			"/uploads/splyw_2025/splyw_2025_05.webp",
			"/uploads/splyw_2025/splyw_2025_06.webp",
			"/uploads/splyw_2025/splyw_2025_07.webp",
			"/uploads/splyw_2025/splyw_2025_08.webp",
		],
		id: "splyw-2025",
	},
	{
		title: "Bal Jubileuszowy 2025",
		description: "Eleganckie święto z okazji 30-lecia działalności Towarzystwa.",
		images: [
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_01.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_02.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_03.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_04.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_05.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_06.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_07.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_08.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_09.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_10.webp",
			"/uploads/bal_jubileuszowy_2025/bal_jubileuszowy_2025_11.webp",
		],
		id: "bal-jubileuszowy-2025",
	},
	{
		title: "Mecz piłki nożnej z Zeelandią",
		description: "Sportowa rywalizacja i integracja podczas meczu piłkarskiego \u2014 28.09.2024",
		images: [
			"/uploads/mecz_28_09_2024/mecz2024-1.webp",
			"/uploads/mecz_28_09_2024/mecz2024-2.webp",
			"/uploads/mecz_28_09_2024/mecz2024-3.webp",
			"/uploads/mecz_28_09_2024/mecz2024-4.webp",
			"/uploads/mecz_28_09_2024/mecz2024-5.webp",
		],
		id: "mecz-zeelandia-2024",
	},
	{
		title: "Biwak w Jarużynie 2024",
		description: "Letni obóz z końmi w malowniczej okolicy Jarużyna.",
		images: [
			"/uploads/biwak_jaruzyn_2024/biwak1.webp",
			"/uploads/biwak_jaruzyn_2024/biwak2.webp",
			"/uploads/biwak_jaruzyn_2024/biwak3.webp",
			"/uploads/biwak_jaruzyn_2024/biwak4.webp",
			"/uploads/biwak_jaruzyn_2024/biwak5.webp",
			"/uploads/biwak_jaruzyn_2024/biwak6.webp",
			"/uploads/biwak_jaruzyn_2024/biwak7.webp",
			"/uploads/biwak_jaruzyn_2024/biwak8.webp",
		],
		id: "biwak-jaruzyn-2024",
	},
	{
		title: "Spływ kajakowy 2024",
		description: "Spływ kajakowy z czerwca 2024 roku \u2014 9.06.2024",
		images: [
			"/uploads/splyw_09_06_2024/splyw1_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw2_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw3_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw4_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw5_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw6_09_06_2024.webp",
			"/uploads/splyw_09_06_2024/splyw7_09_06_2024.webp",
		],
		id: "splyw-czerwiec-2024",
	},
];

// Archive galleries from old site (2005-2008)
const archiveGalleries = [
	{
		title: "Spływ kajakowy 2008",
		description: "Spływ kajakowy na Brdzie \u2014 8 czerwca 2008",
		year: 2008,
		images: seq("splyw_2008", 77),
		id: "splyw-2008",
	},
	{
		title: "Mecz piłkarski 2008",
		description: "Mecz charytatywny \u2014 10 maja 2008",
		year: 2008,
		images: seq("mecz_2008", 56),
		id: "mecz-2008",
	},
	{
		title: "Pożegnanie lata 2007",
		description: "Impreza na zakończenie lata \u2014 23 września 2007",
		year: 2007,
		images: seq("pozegnanie_lata_2007", 52),
		id: "pozegnanie-lata-2007",
	},
	{
		title: "Biwak czerwcowy 2007",
		description: "Biwak integracyjny \u2014 16-17 czerwca 2007",
		year: 2007,
		images: seq("biwak_06_2007", 46),
		id: "biwak-06-2007",
	},
	{
		title: "Mecz piłkarski 2007",
		description: "Mecz charytatywny \u2014 27 kwietnia 2007",
		year: 2007,
		images: seq("mecz_pilkarski_2007", 52),
		id: "mecz-pilkarski-2007",
	},
	{
		title: "Osielsko \u2014 wiosna 2007",
		description: "Zajęcia hipoterapeutyczne w Osielsku, wiosna 2007",
		year: 2007,
		images: seq("osielsko_wiosna_2007", 10),
		id: "osielsko-wiosna-2007",
	},
	{
		title: "Spływ na Brdzie",
		description: "Wielki spływ kajakowy na rzece Brdzie",
		year: 2006,
		images: seq("splyw_na_brdzie", 105),
		id: "splyw-na-brdzie",
	},
	{
		title: "Bal na Dzikim Zachodzie",
		description: "Bal kostiumowy w stylu Dzikiego Zachodu",
		year: 2006,
		images: seq("bal_na_dzikim_zachodzie", 48),
		id: "bal-na-dzikim-zachodzie",
	},
	{
		title: "Piknik kajakarski",
		description: "Piknik i sp\u0142yw kajakowy z uczestnikami i wolontariuszami",
		year: 2006,
		images: seq("piknik_kajakarski", 42),
		id: "piknik-kajakarski",
	},
	{
		title: "Zajęcia w Osielsku",
		description: "Zajęcia hipoterapeutyczne w ośrodku w Osielsku",
		year: 2006,
		images: seq("zdjecia_osielsko", 41),
		id: "zdjecia-osielsko",
	},
	{
		title: "Bal karnawałowy",
		description: "Doroczny bal karnawałowy Towarzystwa",
		year: 2006,
		images: seq("bal_karnawalowy", 20),
		id: "bal-karnawalowy",
	},
	{
		title: "Myślęcinek 1995\u20132005",
		description: "Archiwalne zdjęcia z pierwszej dekady działalności Towarzystwa",
		year: 2005,
		images: [1,2,3,4,5,6,7,8,12,13,14,15,17,20,21,24,25].map(n => `/uploads/archiwum_1995_2005/${n}.webp`),
		id: "archiwum-1995-2005",
	},
];

const totalCurrentPhotos = currentGalleries.reduce((sum, g) => sum + g.images.length, 0);
const totalArchivePhotos = archiveGalleries.reduce((sum, g) => sum + g.images.length, 0);
const totalPhotos = totalCurrentPhotos + totalArchivePhotos;
const totalEvents = currentGalleries.length + archiveGalleries.length;
---

<MainLayout
  title="Galeria"
  description="Galeria zdjęć z zajęć hipoterapii w Bydgoszczy - zobacz nasze wydarzenia, spływy kajakowe, biwaki i codzienne zajęcia rehabilitacyjne z terapeutycznymi końmi."
>
	<PageHero
		title="Galeria zdjęć"
		subtitle="Zapraszamy do oglądania zdjęć z naszych wydarzeń, zajęć hipoterapeutycznych i życia codziennego naszego Towarzystwa."
		breadcrumbs={[{ label: 'Strona główna', href: '/' }, { label: 'Galeria' }]}
	/>

	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
		<!-- Hints -->
		<div class="flex flex-col sm:flex-row gap-4 justify-center mb-12 text-sm text-gray-500">
			<div class="inline-flex items-center justify-center">
				<svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
				</svg>
				Kliknij zdjęcie, aby powiększyć
			</div>
			<div class="inline-flex items-center justify-center">
				<svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
				</svg>
				Użyj strzałek do nawigacji
			</div>
		</div>

		<!-- Current galleries (2024-2025) -->
		{currentGalleries.map((gallery, i) => (
			<ScrollReveal animation="up" delay={i % 2 === 1 ? 150 : 0}>
			<section class="mb-16">
				<div class="card-warm p-8">
					<div class="flex items-center mb-6">
						<div>
							<h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">{gallery.title}</h2>
							<p class="text-gray-600">{gallery.description}</p>
						</div>
					</div>
					<Gallery imagePaths={gallery.images} galleryId={gallery.id} />
				</div>
			</section>
			</ScrollReveal>
		))}

		<!-- Archive section header -->
		<ScrollReveal animation="up">
		<section class="mb-12">
			<div class="text-center">
				<h2 class="section-heading mb-4">
					Archiwum <span class="text-primary-600">fotograficzne</span>
				</h2>
				<p class="text-gray-600 max-w-2xl mx-auto mb-2">
					Zdjęcia z wydarzeń Towarzystwa z lat 2005&ndash;2008 &mdash; przeniesione z poprzedniej strony internetowej.
				</p>
				<p class="text-sm text-gray-400">{totalArchivePhotos} zdjęć z {archiveGalleries.length} wydarzeń</p>
			</div>
		</section>
		</ScrollReveal>

		<!-- Archive galleries -->
		{archiveGalleries.map((gallery, i) => (
			<ScrollReveal animation="up" delay={i % 2 === 1 ? 150 : 0}>
			<section class="mb-16">
				<div class="card-warm p-8">
					<div class="flex items-center mb-6">
						<div>
							<h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-1">{gallery.title}</h2>
							<p class="text-gray-600 text-sm">{gallery.description} &bull; {gallery.images.length} zdjęć</p>
						</div>
					</div>
					<Gallery imagePaths={gallery.images} galleryId={gallery.id} />
				</div>
			</section>
			</ScrollReveal>
		))}

		<!-- Stats -->
		<ScrollReveal animation="scale">
		<section class="mb-16">
			<div class="bg-gradient-to-r from-primary-700 to-primary-800 rounded-2xl p-8 text-white">
				<div class="text-center mb-8">
					<h2 class="font-display text-2xl md:text-3xl font-bold mb-4">
						Nasza galeria w <span class="text-accent-300">liczbach</span>
					</h2>
					<p class="text-primary-100 max-w-2xl mx-auto">
						Każde zdjęcie to wspomnienie, każde wspomnienie to część naszej historii
					</p>
				</div>

				<div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
					<div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-xl">
						<div class="text-3xl md:text-4xl font-bold mb-2 text-accent-300">{totalPhotos}</div>
						<div class="text-primary-100 text-sm">Zdjęć w galerii</div>
					</div>
					<div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-xl">
						<div class="text-3xl md:text-4xl font-bold mb-2 text-accent-300">{totalEvents}</div>
						<div class="text-primary-100 text-sm">Różnych wydarzeń</div>
					</div>
					<div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-xl">
						<div class="text-2xl md:text-3xl font-bold mb-2 text-accent-300">1995&ndash;2025</div>
						<div class="text-primary-100 text-sm">30 lat historii</div>
					</div>
					<div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-xl">
						<div class="text-3xl md:text-4xl font-bold mb-2 text-accent-300">30</div>
						<div class="text-primary-100 text-sm">Lat działalności</div>
					</div>
				</div>
			</div>
		</section>
		</ScrollReveal>

		<!-- CTA -->
		<ScrollReveal animation="up">
		<section>
			<div class="card-warm p-8 text-center">
				<div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
					<svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
					</svg>
				</div>
				<h2 class="section-heading mb-4">
					Masz zdjęcia z naszych <span class="text-primary-600">wydarzeń</span>?
				</h2>
				<p class="text-gray-600 text-lg leading-relaxed mb-8 max-w-2xl mx-auto">
					Jeśli uczestniczyłeś w naszych wydarzeniach i masz zdjęcia, które chciałbyś się z nami podzielić, skontaktuj się z nami. Chętnie dodamy je do galerii!
				</p>
				<a href="/kontakt/" class="btn btn-primary btn-lg inline-flex items-center">
					<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
					</svg>
					Wyślij zdjęcia
				</a>
			</div>
		</section>
		</ScrollReveal>
	</div>
</MainLayout>
